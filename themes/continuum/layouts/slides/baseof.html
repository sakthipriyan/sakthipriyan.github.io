<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ .Description | default .Site.Params.description }}">

    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/theme/sky.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/monokai.css">
    <link rel="stylesheet" href="{{ "css/slides.css" | relURL }}">
    {{- if .Site.Params.googleAnalyticsId }}
    <script>window.googleAnalyticsId = "{{ .Site.Params.googleAnalyticsId }}";</script>
    {{- end }}

    {{ block "head" . }}{{ end }}
</head>

<body>
    {{ block "main" . }}{{ end }}

    <!-- JavaScript -->
    {{ if or (eq .Section "slides") (eq .Type "slides") }}
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/notes/notes.js"></script>
    
    {{/* Merge site-wide defaults with page-specific js_tools */}}
    {{ $defaultTools := slice }}
    {{ if .Site.Params.slides.default_js_tools }}
        {{ $defaultTools = .Site.Params.slides.default_js_tools }}
    {{ end }}
    {{ $jsTools := .Params.js_tools | default $defaultTools }}
    
    {{ if or (in $jsTools "viz") (in $jsTools "all") }}
    <!-- Viz.js for Graphviz diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/viz.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/full.render.js"></script>
    {{ end }}
    
    {{ if or (in $jsTools "echarts") (in $jsTools "all") }}
    <!-- ECharts for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    {{ end }}
    
    {{ if or (in $jsTools "gsap") (in $jsTools "all") }}
    <!-- GSAP for animations -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/TextPlugin.min.js"></script>
    {{ end }}
    {{ end }}

    {{ if or (eq .Section "tools") (eq .Type "tools") }}
    <script src="{{ "js/tools.js" | absURL }}"></script>
    {{ end }}

    {{ block "scripts" . }}{{ end }}

    <script src="{{ "js/main.js" | absURL }}"></script>
</body>

</html>