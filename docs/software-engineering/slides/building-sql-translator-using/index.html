<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Building SQL Translator using | Sakthi Priyan H</title>
    <meta name="description" content="Systems that Scale. Wealth that Compounds.">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/theme/sky.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/monokai.css">

    
    <style>
         
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .reveal {
            width: 100vw !important;
            height: 100vh !important;
        }

        .reveal section {
            font-size: 1.4em;
            line-height: 1.5;
        }

        .reveal .slides>section>section {
            font-size: 1.0em;
        }

        .reveal .progress {
            position: fixed;
            height: 12px;
            bottom: 10px;
            width: 90%;
            left: 5%;
            border-radius: 6px;
        }

        .graphviz {
            width: 100%;
            height: 80vh;
            text-align: center;
        }

        .graphviz svg {
            width: 100%;
            height: 100%;
            display: block;
        }

         
        pre code.dot,
        pre.language-dot,
        pre.dot {
            display: none;
        }
    </style>

    
</head>

<body>
    
<div class="reveal">
    <div class="slides">
        <section data-markdown data-separator="^---$" data-separator-vertical="^--$" data-separator-notes="^Note:" data-charset="utf-8">
            <textarea data-template>
### Natural Language Data Processing  &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
with a &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
### SQL Interface for DAG Execution &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
&lt;br/&gt;

#### Sakthi Priyan H &amp; Chandramouli G &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
##### Nov 13, 2025 &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;

---

#### Contents

1. Hetero Collate &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
2. Prototype Goals &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
3. Architecture &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;
4. Demo &lt;!-- .element: class=&#34;fragment zoom-in&#34; --&gt;

---

### 1Ô∏è‚É£ Hetero Collate

&gt; *Ultra efficient joins using cloud storage,*
&gt; *compared to memory based ones like Spark*

- Can collate/join multiple datasets
  - But, can do only on single set of keys
  - To join multiple datasets using different set of keys 
    it requires **multiple jobs** to be built and run
- Job developed using YAML and/or Python
  - **SQL** interface **NOT** supported currently

---

### 2Ô∏è‚É£ Prototype Goals
- üü¢ Natural Language interface for building jobs
- üü¢ SQL interface for the job
- üü¢ DAG Driver to run a more dynamic DAG stages
  - üü¢ Build a minature Hetero Collate with 2 stages
    - üü¢ Split stage to bucket the data
    - üü¢ Merge stage to sort/merge for a bucket


---

### 3Ô∏è‚É£ Architecture

```dot
digraph NLtoExecution {
  rankdir=LR;
  bgcolor=transparent;
  node [shape=box, style=&#34;rounded,filled&#34;, fontname=&#34;Arial&#34;, fillcolor=&#34;white&#34;];

  // === Nodes ===
  NaturalLanguage [label=&#34;Natural Language&#34;, fillcolor=&#34;#ffd6a5&#34;];
  LLM [label=&#34;AI Agent&#34;, fillcolor=&#34;#fdffb6&#34;];
  SQL [label=&#34;SQL&#34;, fillcolor=&#34;#caffbf&#34;];
  Parser [label=&#34;Parser&#34;, fillcolor=&#34;#9bf6ff&#34;];
  Grammar [label=&#34;Grammar (ANTLR)&#34;, fillcolor=&#34;#ffadad&#34;];
  IR [label=&#34;IR&#34;, fillcolor=&#34;#a0c4ff&#34;];
  DAG [label=&#34;DAG&#34;, fillcolor=&#34;#bdb2ff&#34;];
  Execution [label=&#34;Execution&#34;, fillcolor=&#34;#ffc6ff&#34;];

  // === Main Flow ===
  NaturalLanguage -&gt; LLM -&gt; SQL -&gt; Parser -&gt; IR -&gt; DAG -&gt; Execution;

  // === Shared Grammar Input ===
  Grammar -&gt; LLM;
  Grammar -&gt; Parser;

  // === Styling ===
  edge [color=&#34;#666666&#34;, penwidth=1.4, arrowsize=0.9];
  { rank = same; Grammar; Parser; }
}
```
--
#### 3Ô∏è‚É£ Architecture / Grammar (using ANTLR)
&lt;pre&gt;&lt;code data-line-numbers=&#34;&#34; style=&#34;max-height:600px&#34;&gt;grammar SimpleSQL;
query
    : selectStmt EOF
    ;
selectStmt
    : SELECT selectElements FROM tableSource (joinClause)*
    ;
selectElements
    : STAR
    | columnName (COMMA columnName)*
    ;
tableSource
    : tableName (alias=IDENTIFIER)?
    ;
joinClause
    : (INNER | LEFT | RIGHT)? JOIN tableSource ON booleanExpression
    ;
booleanExpression
    : predicate (AND predicate)*
    ;
predicate
    : fullColumnName EQ fullColumnName
    ;
fullColumnName
    : (tableName DOT)? columnName
    ;
tableName
    : IDENTIFIER
    ;
columnName
    : IDENTIFIER
    ;

// Keywords
SELECT : &#39;SELECT&#39;;
FROM   : &#39;FROM&#39;;
JOIN   : &#39;JOIN&#39;;
INNER  : &#39;INNER&#39;;
LEFT   : &#39;LEFT&#39;;
RIGHT  : &#39;RIGHT&#39;;
ON     : &#39;ON&#39;;
AND    : &#39;AND&#39;;
EQ     : &#39;=&#39;;
STAR   : &#39;*&#39;;
COMMA  : &#39;,&#39;;
DOT    : &#39;.&#39;;

// Identifiers and others
IDENTIFIER
    : [a-zA-Z_][a-zA-Z_0-9]*
    ;

WS
    : [ \t\r\n]&#43; -&gt; skip
    ;
&lt;/code&gt;&lt;/pre&gt;
--
### 3Ô∏è‚É£ Architecture / Query 
#### Natural Language
```txt
Retrieve all user, order and product information by joining 
users with orders on user ID, and orders with products on product ID.
```

#### SQL
```sql
SELECT * FROM users 
INNER JOIN orders ON users.id = orders.user_id 
INNER JOIN products ON orders.product_id = products.id;
```

#### Intermediate Representation
```
IR{
  Tables: [users, orders, products]
  Joins: [
    INNER JOIN orders ON users.id = orders.user_id,
    INNER JOIN products ON orders.product_id = products.id
  ]
  Select: [*]
}
```

--
#### 3Ô∏è‚É£ Architecture / DAG

```dot
digraph DAGStages {
  rankdir=TB;
  bgcolor=transparent;
  node [shape=box, style=&#34;rounded,filled&#34;, fontname=&#34;Arial&#34;, fillcolor=&#34;white&#34;];

  // === Split Stages ===
  split_1_u [label=&#34;split_1_u&#34;, fillcolor=&#34;#fdffb6&#34;];
  split_2_o [label=&#34;split_2_o&#34;, fillcolor=&#34;#fdffb6&#34;];
  split_3_p [label=&#34;split_3_p&#34;, fillcolor=&#34;#fdffb6&#34;];

  // === Merge Stages ===
  merge_1 [label=&#34;merge_1&#34;, fillcolor=&#34;#caffbf&#34;];
  split_merge_1 [label=&#34;split_merge_1&#34;, fillcolor=&#34;#fdffb6&#34;];
  merge_2 [label=&#34;merge_2&#34;, fillcolor=&#34;#caffbf&#34;];

  // === Dependencies ===
  // merge_1 depends on split_1_u, split_2_o
  split_1_u -&gt; merge_1;
  split_2_o -&gt; merge_1;

  // split_merge_1 depends on merge_1
  merge_1 -&gt; split_merge_1;

  // merge_2 depends on split_merge_1, split_3_p
  split_merge_1 -&gt; merge_2;
  split_3_p -&gt; merge_2;

  // === Rank hints ===
  { rank = same; split_1_u; split_2_o; split_3_p; }
}
```
--

#### 3Ô∏è‚É£ Architecture / DAG / Stages
#### üß© Split Stages

| Stage Name       | Dependencies | Partition Keys   |
| ---------------- | ------------ | ---------------- |
| split_1_users    | none         | [id]             |
| split_2_orders   | none         | [user_id]        |
| split_3_products | none         | [id]             |
| split_merge_1    | [merge_1]    | [product_id]     |

--
#### 3Ô∏è‚É£ Architecture / DAG / Stages
#### üîó Merge Stages

| Stage Nam  | Dependencies                      | Join Keys        | Inputs                            |
| ---------- | --------------------------------- | ---------------- | --------------------------------- |
| merge_1    | [split_1_users, split_2_orders]   | [id, user_id]    | [split_1_users, split_2_orders]   |
| merge_2    | [split_merge_1, split_3_products] | [product_id, id] | [split_merge_1, split_3_products] |

--

#### 3Ô∏è‚É£ Architecture / DAG / Execution
- Tables processed: 3  
- Join operations: 2  
- Bucket count: 12  
- DAG stages: 6  
- Output timestamp: 20251113121420  
- Output directory: `data/output/20251113121420`

---

### 4Ô∏è‚É£ Demo
</textarea>
        </section>
    </div>
</div>


    
    
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/notes/notes.js"></script>
    
    
    <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/viz.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/full.render.js"></script>
    

    

        
<script>
    
    function renderGraphviz(slide = null) {
        const slides = slide ? [slide] : Array.from(Reveal.getSlides());
        slides.forEach(slideEl => {
            slideEl.querySelectorAll('pre code.dot, pre.language-dot, pre.dot').forEach(codeEl => {
                if (codeEl.dataset.rendered) return;

                const dotCode = codeEl.textContent.replace(/&gt;/g, '>').replace(/&lt;/g, '<');
                console.log('[DEBUG] Rendering DOT block:\n', dotCode);

                const viz = new Viz();
                viz.renderSVGElement(dotCode)
                    .then(svg => {
                        
                        svg.removeAttribute('width');
                        svg.removeAttribute('height');
                        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');

                        
                        const container = document.createElement('div');
                        container.className = 'graphviz';
                        container.appendChild(svg);

                        
                        const preEl = codeEl.parentNode;
                        preEl.parentNode.replaceChild(container, preEl);

                        codeEl.dataset.rendered = true;
                        console.log('[DEBUG] Diagram rendered and pre replaced.');
                    })
                    .catch(err => {
                        console.error('[DEBUG] Viz.js error:', err);
                        codeEl.parentNode.textContent = "Error rendering diagram: " + err;
                    });
            });
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        Reveal.initialize({
            hash: true,
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
            transition: 'slide',
            slideNumber: false,
            margin: 0.05,
            width: "100%",
            height: "100%",
            minScale: 1,
            maxScale: 1,
            progress: true
        });

        
        Reveal.addEventListener('ready', event => {
            console.log('[DEBUG] Reveal ready, rendering all slides...');
            
            Reveal.getSlides().forEach(slideEl => {
                if (slideEl.dataset.parsed) return;
                if (slideEl.querySelector('textarea[data-template]')) {
                    RevealMarkdown.parseSlide(slideEl);
                    slideEl.dataset.parsed = true;
                }
            });
            renderGraphviz(); 
        });

        
        Reveal.on('slidechanged', event => {
            console.log('[DEBUG] Slide changed to index', event.indexh);
            renderGraphviz(event.currentSlide);
        });

        
        Reveal.addEventListener('markdown', event => {
            console.log('[DEBUG] Markdown parsed for slide', event.slide);
            renderGraphviz(event.slide);
        });
    });
</script>


            <script>
            
            (function() {
                function getQueryParam(name) {
                    return new URLSearchParams(window.location.search).get(name);
                }
                const obsParam = getQueryParam('obs');
                if (obsParam) {
                    
                    const parts = obsParam.split(":");
                    let host = parts[0] || "";
                    let port = parts[1] || "";
                    let password = "";
                    if (parts.length > 2) {
                        
                        password = parts.slice(2).join(":");
                    }
                    if (!host || !port) {
                        host = prompt("Enter OBS host (e.g. 192.168.1.100):", "localhost") || "localhost";
                        port = prompt("Enter OBS port (e.g. 4455):", "4455") || "4455";
                    }
                    const obsWsUrl = `ws://${host}:${port}`;

                    
                    var obsScript = document.createElement('script');
                    obsScript.src = 'https://cdn.jsdelivr.net/npm/obs-websocket-js';
                    obsScript.onload = function() {
                        const obs = new OBSWebSocket();

                        const connectToObs = async () => {
                            try {
                                await obs.connect(obsWsUrl, password);
                                console.log('Connected to OBS!');
                            } catch (error) {
                                console.error('Failed to connect:', error);
                            }
                        };

                        const switchScene = async (sceneName) => {
                            try {
                                await obs.call('SetCurrentProgramScene', { sceneName });
                                console.log(`Switched to scene: ${sceneName}`);
                            } catch (error) {
                                console.error('Failed to switch scene:', error);
                            }
                        };

                        connectToObs();

                        let obsSceneIndex = 0;
                        const obsScenes = ["Screen Only", "Video RB", "Video Only"];

                        document.addEventListener("keydown", (e) => {
                            const key = e.key;
                            if (key != "b" && key != "Escape" && key != "Shift" &&
                                    key != "F5" && key != "Alt" && key != "Meta" && key != "œÄ") {
                                    return;
                            }
                            e.preventDefault();
                            e.stopImmediatePropagation();
                            if (key === "b") {
                                    obsSceneIndex = (obsSceneIndex - 1 + obsScenes.length) % obsScenes.length;
                            } else if (key === "Escape" || key === "œÄ") {
                                    obsSceneIndex = (obsSceneIndex + 1) % obsScenes.length;
                            }
                            if (key === "b" || key === "Escape" || key === "œÄ") {
                                    const currentScene = obsScenes[obsSceneIndex];
                                    switchScene(currentScene);
                            }
                        }, true);
                    };
                    document.body.appendChild(obsScript);
                }
            })();
            </script>
                <script async src="https://www.googletagmanager.com/gtag/js?id=G-5NGEJ767SK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5NGEJ767SK');
    </script>
</body>

</html>